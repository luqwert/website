<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>数据查询</title>
    <script type="text/javascript" src="../static/echarts.min.js"></script>
    <!-- 引入jquery.js -->
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <script src="https://cdn.staticfile.org/jquery/2.0.0/jquery.min.js"></script>
    <link rel="stylesheet" href="../static/css/animate.css">
    <link rel="stylesheet" href="../static/css/imagehover.css">
    <script src="../static/js/wow.min.js"></script>
    <script>
        new WOW().init();
    </script>
    <link href="https://cdn.staticfile.org/twitter-bootstrap/3.3.7/css/bootstrap.min.css" rel="stylesheet">
    <script src="https://cdn.staticfile.org/twitter-bootstrap/3.3.7/js/bootstrap.min.js"></script>
    <link rel="shortcut icon" href="../static/img/touxiang.png">
    <style>
        * {
            margin: 0;
            padding: 0;
        }

        html {
            /*display: flex;*/
            /*justify-content: center;*/
            /*background-color: floralwhite;*/
        }
        body {
            width: 986px;
            margin: 0 auto;
        }
        #header,#biaotiliebiao,#mianbody,#bottom {
            width: 986px;
            margin: 0 auto;
        }
        body {
            padding: 0 10px;
        }
        #header,#biaotiliebiao,#mianbody,#bottom {
            width: 986px;
            margin: 0 auto;
        }
        #logo {
            height: 100px;
            width: 100px;
            float: left;
            overflow: hidden;
        }
        #logo a img {
            display: block;
        }
        #logo a {
            display: block;
        }
        #logo img {
            height: 100px;
            width: 100px;
            overflow: hidden;
        }
        @font-face {
            font-family: myfont;
            src: url("../static/PangMenZhengDaoCuShuTi-2.ttf");
        }
        #slogan {

            float: left;
            display: block;
            height: 100px;
            width: 886px;
            line-height: 140px;
            font-size: 40px;
            text-align: center;
            background: linear-gradient(to right,floralwhite,yellow,greenyellow,steelblue);
            border-radius:10px;
            overflow: hidden;
        }
        #slogan p {
            font-family:myfont;
            background: linear-gradient(45deg,#ee3333, green, #ff0022);
            -webkit-background-clip: text;
            color: transparent;
            text-shadow: 10px 3px 5px dimgrey;
            font-style: italic;
            line-height: 100px;
            /*transform:matrix(1.3,-0.03,0.8,0.9,50,0)*/
        }
        #biaotiliebiao {
            margin: 5px 0;
            float: left;
            width: 986px;
            height: 30px;
            background:linear-gradient(to bottom,floralwhite,steelblue);
            border-radius:10px;
            overflow: hidden;

        }
        #biaotiliebiao li{
            float: left;
            list-style: none;
        }
        #biaotiliebiao li a {
            padding: 0 64px;
            text-decoration: none;
            line-height: 30px;
            font-size: 20px;
            text-align: center;
            float: left;
            color: #555555;
        }
        #biaotiliebiao li a:hover{
            color: seagreen;
            background:linear-gradient(to bottom,whitesmoke,deepskyblue);
            -webkit-transition-timing-function: linear ;
            border-radius:10px;
            font-size: 21px;

        }
        .shujuchaxun:link {
            color: seagreen;
            background:linear-gradient(to bottom,whitesmoke,lightskyblue);
            border-radius:10px;
        }
        #chaxunbiaodan {
            width: 100%;
            margin: 10px auto;
        }
        #chaxunbiaodan article{
            width: 50%;
            float: left;
        }
        #chaxunbiaodan article div{
            padding-left: 120px;
            font-size: 15px;
        }
        #chaxunbiaodan article div header{
            font-size: 18px;
            font-weight: bold;
        }
        .tijiao{
            width: 50px;
            font-weight: bold;
        }
        #shujuzhexiantu {
            width: 80%;
            margin: 0 10%;
        }

        #price_list {
            display: none;
            margin-left: 120px;
            /*column-width: fill-available;*/
            text-align: center;
            border:1px solid #000
        }

        #price_list td {
            width: 250px;
            border:1px solid #000
        }
        #price_list td tr {

            width: 200px;
        }
        table tr:nth-child(odd) {
            background-color: lightskyblue

        }
        table tr:nth-child(even) {
            background-color: floralwhite;

        }
        table tr:first-child{
            background-color: #00bbff;
            align-content: center;

        }
        table tr:hover {
            background-color: pink;
            transition: all 0.3s ease;
        }
        #chaxuntubiao,#chaxuntubiao2 {
            display: inline-block;
            /*text-align: center;*/
            width:750px;
            height: 400px;
            margin: 0 100px 0 100px;
        }
        .tijiao {
            width: max-content;
        }
        #bottom {
            float: left;
            padding: 25px 0;
        }
        #bottom p {
            display: block;
            float: left;
            width: 986px;
            height: 20px;
            text-align: center;
            font-size: small;
            color: #1155;
        }
    </style>
</head>
<body>
    <div id="header">
        <div id="logo">
            <a href="#">
                <img src="../static/img/touxiang.png" alt="logo">
            </a>
        </div>
        <div id="slogan">
            <p class="wow flipInX slow" data-wow-duration="2s" data-wow-delay="1s"  data-wow-iteration="infinite">学&nbsp&nbsp海&nbsp&nbsp无&nbsp&nbsp涯&nbsp&nbsp回&nbsp&nbsp头&nbsp&nbsp是&nbsp&nbsp岸</p>
        </div>
    </div>
    <div id="biaotiliebiao">
    <ul>
        <li><a class="shouye" href="../">首页</a></li>
        <li><a class="baogao" href="../report">数据报告</a></li>
        <li><a  href="#">技术博客</a></li>
        <li><a class="shujuchaxun" href="../shujuchaxun">数据查询</a></li>
        <li><a  href="#">小工具</a></li>
    </ul>
    </div>
    <section id="chaxunbiaodan">
        <article id="platts">
            <div>
                <header>
                    <p>普氏指数查询</p>
                </header>
                <section>
                    <form id="xhacun_platts" onsubmit="return false" action="#" method="post">
                    <lable>起始日期：</lable>
                    <input type="date" required name="sdate"><br>
                    <lable>结束日期：</lable>
                    <input type="date" required name="edate"><br>
                    <input class="tijiao" type="submit" value="开始查询" onclick=getData_platts(sdate,edate)>
                </form>
                </section>
            </div>
        </article>
        <article id="huachengmengpian">
            <div>
                <header>
                    <p>锰片价格查询</p>
                </header>
                <section>
                    <form id="xhacun_mengpian" onsubmit="return false" action="#" method="post">
                    <lable>起始日期：</lable>
                    <input type="date" required required name="sdate"><br>
                    <lable>结束日期：</lable>
                    <input type="date" required required name="edate"><br>
                    <input class="tijiao" type="submit" value="开始查询" onclick=getData_mengpian(sdate,edate)>
                </form>
                </section>
            </div>
        </article>
    </section>
    <section>
        <div>
            <!--<img id="shujuzhexiantu" src="../static/shujujieguo/platts.jpeg" alt="">-->
        </div>
        <div id="chaxuntubiao"></div>
        <div id="chaxuntubiao2"></div>
        <div>
            <table id="price_list" cellpadding="0" cellspacing="0"  >
                <!--{% for line in price_list %}-->
                    <!--<tr>-->
                        <!--{% for li in line %}-->
                            <!--<td>&nbsp{{ li }}&nbsp</td>-->
                        <!--{% endfor %}-->
                    <!--</tr>-->
                <!--{% endfor %}-->
            </table>
        </div>
    </section>
    <div id="bottom">
    <p id="lianxifangshi">联系方式：lusheng1234@126.com</p>
     <p>
        <a id="beianxinxi" href="http://www.miitbeian.gov.cn/" target="_blank">沪ICP备19019519号-1</a>
    </p>
    <p id="banquan">版权所有Copyright © www.lushengsheng.cn All Rights Reserved</p>

    </div>

    <script type="text/javascript">

        // 发送ajax请求，从后台获取json数据
        function getData_platts() {
        var myChart = echarts.init(document.getElementById('chaxuntubiao'));
        var app = {
        xday:[],
        yvalue1:[],
        yvalue2:[],
    };
        document.getElementById("chaxuntubiao2").style.display="none";
        document.getElementById("chaxuntubiao").style.display="inline-block";
         $.ajax({
            url:'/platts',
            data: $('#xhacun_platts').serialize(),
            type:'POST',
            async:false,
            dataType:'json',
             cache:false,
            success:function(data) {
                app.xday = data.xdays;
                app.yvalue1 = data.yvalues1;
                app.yvalue2 = data.yvalues2;
                var price_list = data.price_list;
                myChart.setOption({
                    title: {},
                    tooltip: {
                        trigger: 'axis',
                        dataZoom: [　　//x轴是否可以滑动
                        {
                          type: 'inside',
                          start: 50, //从50%开始显示
                          end: 100,　//到100%的位置　
                          filterMode: 'empty',
                          },
                        ]
                    },
                    legend: {
                        data:["62指数", "58指数", ],
                        icon: "roundRect",
                        itemGap:40,
                    },
                    xAxis: {
                        data: app.xday
                    },
                    yAxis: {},
                    series: [{
                        name: '62指数',
                        type: 'line',
                        data: app.yvalue1,
                        markLine : { data : [ {type : 'average', name: '平均值'} ] }
                    },{
                        name: '58指数',
                        type: 'line',
                        data: app.yvalue2,
                        markLine : { data : [ {type : 'average', name: '平均值'} ] }
                    }]
                });
                var str = "";
                for(var i=0;i<price_list.length;i++) {
                    str += "<tr>" +
                    "<td>" + price_list[i][0] + "</td>" +
                    "<td>" + price_list[i][1] + "</td>" +
                    "<td>" + price_list[i][2] + "</td>" +
                    "</tr>"
                };
                console.log(str);
                document.getElementById("price_list").innerHTML = str;
                $("#price_list").fadeIn(500)

            },
            error:function (msg) {
                console.log(msg);
                alert('系统发生错误');
            }
        });
           console.log(app.xday);
           console.log(app.yvalue1);
           console.log(app.yvalue2);
    }
        function getData_mengpian() {
        var myChart = echarts.init(document.getElementById('chaxuntubiao2'));
        var app = {
        xday:[],
        yvalue:[],
    };
        document.getElementById("chaxuntubiao").style.display="none";
        document.getElementById("chaxuntubiao2").style.display="inline-block";
         $.ajax({
            url:'/mengpian',
            data: $('#xhacun_mengpian').serialize(),
            type:'POST',
            async:false,
            dataType:'json',
             cache:false,
            success:function(data) {
                app.xday = data.xdays;
                app.yvalue = data.yvalues2;
                var price_list = data.price_list;
                myChart.setOption({
                    title: {},
                    tooltip: {
                        trigger: 'axis',
                        dataZoom: [　　//x轴是否可以滑动
                        {
                          type: 'inside',
                          start: 50, //从50%开始显示
                          end: 100,　//到100%的位置　
                          filterMode: 'empty',
                          },
                        ]
                    },
                    legend: {
                        data:["日均价格",],
                        icon: "roundRect",
                        itemGap:40,
                    },
                    xAxis: {
                        data: app.xday
                    },
                    yAxis: {},
                    series: [{
                        name: '日均价格',
                        type: 'line',
                        data: app.yvalue,
                        markLine : { data : [ {type : 'average', name: '平均值'} ] }
                    }]
                });
                var str = "";
                for(var i=0;i<price_list.length;i++) {
                    str += "<tr>" +
                    "<td>" + price_list[i][0] + "</td>" +
                    "<td>" + price_list[i][1] + "</td>" +
                    "<td>" + price_list[i][2] + "</td>" +
                    "</tr>"
                };
                console.log(str);
                document.getElementById("price_list").innerHTML = str;
                $("#price_list").fadeIn(500)

            },
            error:function (msg) {
                console.log(msg);
                alert('系统发生错误');
            }
        });
           console.log(app.xday);
           console.log(app.yvalue);
    }
        // myChart.setOption(option);
    </script>
</body>
</html>